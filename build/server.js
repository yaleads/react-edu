!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/assets/",r(r.s=18)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("reactstrap")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("lodash/object")},function(e,t){e.exports=require("formik")},function(e,t){e.exports=require("yup")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("pluralize")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("superagent")},function(e,t){e.exports=require("qs")},function(e,t){e.exports=require("store")},function(e,t){e.exports=require("history")},function(e){e.exports={"main.css":"/assets/main.54cf95e4f654bfb804eb.css","main.js":"/assets/main.54cf95e4f654bfb804eb.js","main.css.map":"/assets/main.54cf95e4f654bfb804eb.css.map","main.js.map":"/assets/main.54cf95e4f654bfb804eb.js.map","./index.html":"/./index.html"}},function(e,t,r){"use strict";r.r(t);var n=r(8),o=r.n(n),a=r(9),c=r.n(a),i=r(0),u=r.n(i),l=r(10),s=r(3),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":id";return"/products/".concat(e)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":id",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":index";return"/products/".concat(e,"/img/").concat(t)},m=r(4),b=r(1),d=r(2),y=r.n(d),h=r(11),v=r.n(h),g=function(e,t){return{type:"ADD_PRODUCT_TO_CART",product:e,count:t}};function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,w(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,i["Component"]),r=t,(n=[{key:"catchDrop",value:function(e){var t=JSON.parse(e.dataTransfer.getData("productDraggableObject")),r=parseInt(e.dataTransfer.getData("productDraggableCount"));t&&r&&this.props.addProductToCart(t,r)}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{onDrop:function(t){return e.catchDrop(t)},onDragOver:function(e){return e.preventDefault()}},u.a.createElement(s.NavLink,{to:"/cart",className:"btn btn-outline-success my-2 my-sm-0"},"Cart: ",v()("item",this.props.cartItemsCounter,!0)))}}])&&O(r.prototype,n),o&&O(r,o),t}();j.propTypes={addProductToCart:y.a.func.isRequired,cartItemsCounter:y.a.number.isRequired};var C=Object(m.connect)(function(e){return{cartItemsCounter:e.cart.items.reduce(function(e,t){return e+t.count},0)}},{addProductToCart:g})(j);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(e){var r,n,o,a,c,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=T(t).call(this,e),r=!o||"object"!==P(o)&&"function"!=typeof o?k(n):o,a=k(r),i=function(){r.setState({isOpen:!r.state.isOpen})},(c="toggle")in a?Object.defineProperty(a,c,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[c]=i,r.state={isOpen:!1},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,u.a.Component),r=t,(n=[{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(b.Navbar,{color:"light",light:!0,expand:"md"},u.a.createElement(b.NavbarBrand,{href:"/"},"React App"),u.a.createElement(b.NavbarToggler,{onClick:this.toggle}),u.a.createElement(b.Collapse,{isOpen:this.state.isOpen,navbar:!0},u.a.createElement(b.Nav,{navbar:!0},u.a.createElement(b.NavItem,null,u.a.createElement(b.NavLink,{tag:s.NavLink,exact:!0,to:"/",activeClassName:"active"},"Catalog")),u.a.createElement(b.NavItem,null,u.a.createElement(b.NavLink,{tag:s.NavLink,to:"/contacts",activeClassName:"active"},"Contacts")),u.a.createElement(b.NavItem,null,u.a.createElement(b.NavLink,{tag:s.NavLink,to:"/cart",activeClassName:"active"},"Cart")))),u.a.createElement(C,null)))}}])&&x(r.prototype,n),o&&x(r,o),t}(),R=r(12),q=r.n(R);var D=function(e){var t=e.src,r=e.width,n=e.height,o=e.alt,a=e.className,c=e.onClickEvent;return u.a.createElement("img",{src:t,width:r,height:n,alt:o,className:a,onClick:c})},F=function(e){var t=e.location.state,r=e.history;if(t){var n=t.image;return u.a.createElement("div",null,q.a.createPortal(u.a.createElement("div",null,u.a.createElement(b.Modal,{isOpen:!0,toggle:function(e){e.stopPropagation(),r.goBack()},className:"modal-lg"},u.a.createElement(b.ModalBody,null,u.a.createElement(D,{src:n.url,width:"100%",alt:n.title}),u.a.createElement("p",null,n.title)))),document.getElementById("fullScreenGalleryContainer")))}return null},L="FETCH_PRODUCTS_REQUEST",A="FETCH_PRODUCTS_SUCCESS",M="FETCH_PRODUCTS_ERROR",U=(r(13),r(14),r(5));"https://cdn.contentful.com/spaces/".concat("g7q8snx9jra2","/environments/").concat("master","/entries?access_token=").concat("pVBy5AYglq6O9vq_Otzu-uiWcbigl5nu9O85qdTlfVQ");var G="API_CALL";function X(){return r={method:"GET",query:{content_type:"product"},types:[L,A,M]},(t=G)in(e={})?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var e,t,r}var B=function(e){var t=e.text;return u.a.createElement("span",null,t)};var z=function(e){var t=e.price;return u.a.createElement("span",{style:{textDecoration:"underline"}},"$",t)};function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Q(t).call(this,e),r=!o||"object"!==H(o)&&"function"!=typeof o?V(n):o,Y(V(r),"addCount",function(){r.setState(function(e){return{count:e.count+1}})}),Y(V(r),"removeCount",function(){r.setState(function(e){return{count:1===e.count?1:e.count-1}})}),r.state={count:1},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,u.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.product,r=e.addProductToCart,n=this.state.count;return u.a.createElement(u.a.Fragment,null,u.a.createElement("p",null,u.a.createElement("span",null,u.a.createElement("button",{onClick:this.removeCount},"-"),u.a.createElement("input",{id:"add_product_".concat(t.id,"_to_cart_counter"),value:n,readOnly:!0,style:{width:"40px",textAlign:"center"}}),u.a.createElement("button",{onClick:this.addCount},"+"))),u.a.createElement("p",null,u.a.createElement("button",{onClick:function(){return r(t,n)}},"Add to Cart")))}}])&&J(r.prototype,n),o&&J(r,o),t}();$.propTypes={product:y.a.object.isRequired};var K=Object(m.connect)(null,{addProductToCart:g})($);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe=function(e){function t(){var e,r,n,o,a,c,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=this,r=!(o=(e=te(t)).call.apply(e,[this].concat(l)))||"object"!==Z(o)&&"function"!=typeof o?re(n):o,a=re(r),i=function(e,t){e.dataTransfer.setData("productDraggableObject",JSON.stringify(t)),e.dataTransfer.setData("productDraggableCount",document.getElementById("add_product_".concat(t.id,"_to_cart_counter")).value)},(c="onDragStart")in a?Object.defineProperty(a,c,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[c]=i,r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,i["Component"]),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.product,r=t.id,n=t.title,o=t.price,a=t.imageUrl,c=this.props.product;return u.a.createElement("div",{key:r,id:r,draggable:!0,onDragStart:function(t){return e.onDragStart(t,c)},className:"row mb-3 mt-3 border pt-3 pb-3"},u.a.createElement("div",{className:"col-md-4"},u.a.createElement(D,{src:a,width:"180",height:"250",alt:n})),u.a.createElement("div",{className:"col-md-6"},u.a.createElement("h4",null,u.a.createElement(s.NavLink,{to:f(r)},u.a.createElement(B,{text:n}))),u.a.createElement("p",null,u.a.createElement(z,{price:o})),u.a.createElement(K,{product:c})))}}])&&ee(r.prototype,n),o&&ee(r,o),t}(),ae=function(e){var t=e.products;return u.a.createElement("div",null,t.map(function(e){return u.a.createElement(oe,{product:e,key:e.id})}))},ce=function(e){var t=e.type,r=void 0===t?"danger":t,n=e.text,o=void 0===n?void 0:n;return void 0!==o?u.a.createElement(b.UncontrolledAlert,{color:r},o):null};function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var me=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=le(t).call(this,e),r=!o||"object"!==ie(o)&&"function"!=typeof o?se(n):o,pe(se(r),"prevSlide",function(){r.setState(function(e){return{currentIndex:(e.currentIndex-1+r.props.products.length)%r.props.products.length}})}),pe(se(r),"nextSlide",function(){r.setState(function(e){return{currentIndex:(e.currentIndex+1)%r.props.products.length}})}),r.state={currentIndex:0},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,u.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return e.nextSlide()},5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.products,t=this.state.currentIndex;return u.a.createElement("div",{className:"row my-5"},u.a.createElement("div",{className:"col-10 col-sm-10 col-md-6"},u.a.createElement(oe,{product:e[t]})),u.a.createElement("div",{className:"col-2 col-sm-2 col-md-2 pt-5"},u.a.createElement("button",{onClick:this.prevSlide,className:"mb-2"},"Prev"),u.a.createElement("br",null),u.a.createElement("button",{onClick:this.nextSlide},"Next")))}}])&&ue(r.prototype,n),o&&ue(r,o),t}(),be=function(e){var t=e.products,r=e.sliderProducts,n=e.alertText,o=e.isFetching,a=e.isError;return u.a.createElement("div",{className:"container"},u.a.createElement(ce,{text:n}),r.length>0&&u.a.createElement(me,{products:r}),u.a.createElement("h1",{className:"mt-3"},"Products Catalog"),u.a.createElement("hr",null),o&&u.a.createElement("p",null,"Загрузка товаров..."),a&&u.a.createElement("p",null,"Не удалось загрузить товары"),t&&u.a.createElement(ae,{products:t}))};function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),he(this,ve(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,u.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this.props,t=e.products,r=e.isFetching,n=e.isError,o=this.props.location.state&&this.props.location.state.errorMessage;return u.a.createElement(be,{products:t,sliderProducts:t,alertText:o,isFetching:r,isError:n})}}])&&ye(r.prototype,n),o&&ye(r,o),t}();Ee.propTypes={fetchProducts:y.a.func.isRequired,products:y.a.array.isRequired,isFetching:y.a.bool.isRequired,isError:y.a.bool.isRequired};var Oe={path:"/",component:Object(m.connect)(function(e){return{products:e.products.items,isFetching:e.products.isFetching,isError:e.products.isError}},{fetchProducts:X})(Ee),exact:!0,strict:!0,prepareData:function(e){var t=e.dispatch(X()),r=e.dispatch({type:"LOAD_CART"});return Promise.all([t,r])}},Se=function(e){var t=e.productId,r=e.currentImageIndex,n=e.currentImage;return u.a.createElement(s.Link,{className:"btn btn-primary mb-2",to:{pathname:p(t,r),state:{modal:!0,image:n}}},"Show full screen")};function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Te=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=je(t).call(this,e),r=!o||"object"!==we(o)&&"function"!=typeof o?Ce(n):o,xe(Ce(r),"onTouchStart",function(e){r.setState({touchStartX:e.touches[0].clientX})}),xe(Ce(r),"onTouchMove",function(e){r.setState({touchMoveX:e.touches[0].clientX})}),xe(Ce(r),"onTouchEnd",function(){r.state.touchMoveX>r.state.touchStartX&&r.props.onSwipe("right"),r.state.touchMoveX<r.state.touchStartX&&r.props.onSwipe("left")}),r.state={touchStartX:void 0,touchMoveX:void 0},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,u.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.currentImage,r=e.width,n=e.height,o=e.className;return u.a.createElement("img",{src:t.url,width:r,height:n,alt:t.title,className:o,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd})}}])&&_e(r.prototype,n),o&&_e(r,o),t}();function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fe=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Ie(t).call(this,e),r=!o||"object"!==ke(o)&&"function"!=typeof o?Re(n):o,De(Re(r),"prevImage",function(){r.setState(function(e){return{currentImageIndex:(e.currentImageIndex-1+r.props.images.length)%r.props.images.length}})}),De(Re(r),"nextImage",function(){r.setState(function(e){return{currentImageIndex:(e.currentImageIndex+1)%r.props.images.length}})}),r.state={currentImageIndex:0},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,u.a.Component),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.images;if(t){var r=this.props.productId,n=this.props.images[this.state.currentImageIndex];return u.a.createElement("div",{className:"mb-5"},u.a.createElement("h4",{className:"mt-5"},"Product Galery:"),u.a.createElement("button",{onClick:this.prevImage},"<"),u.a.createElement(Te,{currentImage:n,width:600,height:400,className:"mb-2",onSwipe:function(t){return"right"===t?e.prevImage():e.nextImage()}}),u.a.createElement("button",{onClick:this.nextImage},">"),u.a.createElement("br",null),u.a.createElement(Se,{productId:r,currentImageIndex:this.state.currentImageIndex,currentImage:n}),u.a.createElement("br",null),t.map(function(t,r){return u.a.createElement(D,{key:r,src:t.url,width:120,height:80,alt:t.title,onClickEvent:function(){return e.setState({currentImageIndex:r})}})}))}return u.a.createElement("h4",{className:"mt-5"},"No images in Gallery")}}])&&Ne(r.prototype,n),o&&Ne(r,o),t}(),Le=function(e){var t=e.isLoading,r=e.product;return u.a.createElement("div",{className:"container"},u.a.createElement("h1",{className:"mt-3"},"Product Page"),u.a.createElement("hr",null),t?u.a.createElement("p",null,"Loading product Info..."):u.a.createElement(oe,{product:r}),!t&&u.a.createElement(Fe,{images:r.images,productId:r.id}))};function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ue(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ue(this,Ge(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,u.a.Component),r=t,(n=[{key:"componentDidUpdate",value:function(){this.props.isError&&this.props.history.push({pathname:"/",state:{errorMessage:"ProductPage not found"}})}},{key:"render",value:function(){var e=this.props,t=e.product,r=e.isFetching,n=e.isError;return u.a.createElement(Le,{product:t,isFetching:r,isError:n})}}])&&Me(r.prototype,n),o&&Me(r,o),t}();Be.propTypes={product:y.a.object.isRequired,isFetching:y.a.bool.isRequired,isError:y.a.bool.isRequired};var ze=Object(m.connect)(function(e){return{product:e.product.item,isFetching:e.product.isFetching,isError:e.product.isError}})(Be),He="FETCH_PRODUCT_REQUEST",Je="FETCH_PRODUCT_SUCCESS",Qe="FETCH_PRODUCT_ERROR";function Ve(e){return n={method:"GET",query:{content_type:"product","fields.id":e},types:[He,Je,Qe]},(r=G)in(t={})?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t;var t,r,n}var We={path:f(),render:function(e){var t=e.match,r=e.history;return u.a.createElement(ze,{id:t.params.id,history:r})},prepareData:function(e,t,r){var n=e.dispatch(Ve(r.id)),o=e.dispatch({type:"LOAD_CART"});return Promise.all([n,o])}},Ye=function(e){var t=e.type,r=e.name,n=e.label,o=e.placeholder,a=e.value,c=e.rows,i=e.error,l=e.onChange;return u.a.createElement("div",null,u.a.createElement(b.Label,{for:r},n||r),u.a.createElement(b.Input,{type:t||"text",name:r,id:r,placeholder:o,value:a,rows:c,onChange:l,invalid:!!i}),!!i&&u.a.createElement(b.FormFeedback,null,i))};Ye.propTypes={type:y.a.string,name:y.a.string.isRequired,label:y.a.string,placeholder:y.a.string,value:y.a.string.isRequired,rows:y.a.number,error:y.a.string,onChange:y.a.func};var $e=Ye;function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ot=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=et(t).call(this,e),r=!o||"object"!==Ke(o)&&"function"!=typeof o?tt(n):o,nt(tt(r),"onSubmit",function(e){e.preventDefault(),alert(JSON.stringify(r.state.form.values))}),nt(tt(r),"clearError",function(e){r.setState(Object(U.set)(Object(U.assign)({},r.state),["form","errors",e],""))}),nt(tt(r),"validateLength",function(e,t,n,o){t.length<n&&r.setState(Object(U.set)(Object(U.assign)({},r.state),["form","errors",e],o))}),nt(tt(r),"handleChange",function(e){return function(t){var n=t.target.value;switch(e){case"name":r.clearError("name"),r.validateLength("name",n,3,"Name is too short");break;case"email":r.clearError("email"),r.validateLength("email",n,3,"Email is too short")}r.setState(Object(U.set)(Object(U.assign)({},r.state),["form","values",e],n))}}),r.state={form:{values:{name:"",email:"",comment:""},errors:{}}},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,u.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.state.form.values,t=e.name,r=e.email,n=e.comment;return u.a.createElement(b.Form,{onSubmit:this.onSubmit},u.a.createElement(b.FormGroup,{row:!0},u.a.createElement(b.Col,{sm:5},u.a.createElement($e,{name:"name",label:"Name",placeholder:"Enter your name",value:t,error:this.state.form.errors.name,onChange:this.handleChange("name")}))),u.a.createElement(b.FormGroup,{row:!0},u.a.createElement(b.Col,{sm:5},u.a.createElement($e,{type:"email",name:"email",label:"Email",placeholder:"Enter your email",value:r,error:this.state.form.errors.email,onChange:this.handleChange("email")}))),u.a.createElement($e,{type:"textarea",rows:4,name:"comment",label:"Comment",placeholder:"Enter your comment",value:n,error:this.state.form.errors.comment,onChange:this.handleChange("comment")}),u.a.createElement("br",null),u.a.createElement(b.Button,null,"Submit"))}}])&&Ze(r.prototype,n),o&&Ze(r,o),t}(),at={path:"/contacts",component:function(){return u.a.createElement("div",{className:"container"},u.a.createElement("h1",{className:"mt-3"},"Contact us"),u.a.createElement("hr",null),u.a.createElement(ot,null))},prepareData:function(e){return e.dispatch({type:"LOAD_CART"})}},ct=function(e){return e>1?"".concat(e," x "):""},it=function(e){var t=e.cart;return t.length>0?u.a.createElement("div",null,"Details:",t.map(function(e){return u.a.createElement("li",{key:e.product.id},ct(e.count),e.product.title)})):u.a.createElement("p",null,"No products in the Cart")},ut=r(6),lt=function(e){var t=e.type,r=e.name,n=e.label,o=e.invalid,a=e.errorText,c=e.size;return c?u.a.createElement(b.FormGroup,{row:!0},u.a.createElement(b.Col,{sm:c},u.a.createElement(b.Label,{for:r},n),u.a.createElement(b.Input,{type:t||"text",name:r,tag:ut.Field,invalid:o}),u.a.createElement(b.FormFeedback,null,a))):u.a.createElement(b.FormGroup,null,u.a.createElement(b.Label,{for:r},n),u.a.createElement(b.Input,{type:t||"text",name:r,tag:ut.Field,invalid:o}),u.a.createElement(b.FormFeedback,null,a))};lt.propTypes={type:y.a.string,name:y.a.string.isRequired,label:y.a.string.isRequired,invalid:y.a.bool,errorText:y.a.string};var st=lt,ft=function(e){var t=e.name,r=e.label,n=e.checked;return u.a.createElement(b.FormGroup,{check:!0,row:!0},u.a.createElement(b.Label,{check:!0},u.a.createElement(ut.Field,{type:"checkbox",name:t,checked:n})," ",r))};ft.propTypes={name:y.a.string.isRequired,label:y.a.string.isRequired,checked:y.a.bool.isRequired};var pt=ft,mt=function(e){var t=e.values,r=e.errors,n=e.touched,o=e.isSubmitting;return u.a.createElement(ut.Form,null,n&&r.cart&&u.a.createElement(b.Alert,{color:"danger"},r.cart),u.a.createElement(st,{name:"fullName",label:"Full Name",invalid:r.fullName&&n.fullName,errorText:r.fullName,size:"4"}),u.a.createElement(st,{name:"email",label:"Email",invalid:r.email&&n.email,errorText:r.email,size:"4",type:"email"}),u.a.createElement(st,{name:"phone",label:"Phone",invalid:r.phone&&n.phone,errorText:r.phone,size:"4"}),u.a.createElement(st,{name:"address",label:"Address",invalid:r.address&&n.address,errorText:r.address,size:"8"}),u.a.createElement(pt,{name:"newsletter",label:"Subscribe to our newsletter",checked:t.newsletter}),u.a.createElement("br",null),u.a.createElement(b.Button,{disabled:o},"Submit"))};mt.propTypes={values:y.a.object,errors:y.a.object,touched:y.a.object,isSubmitting:y.a.bool};var bt=mt,dt=r(7),yt=Object(ut.withFormik)({mapPropsToValues:function(e){return{cart:e.cart,fullName:"",phone:"",email:"",address:"",newsletter:!1}},handleSubmit:function(e,t){var r=t.props,n=t.resetForm,o=t.setErrors,a=t.setSubmitting;setTimeout(function(){"test@test.com"===e.email?o({email:"This email is blocked"}):(alert(JSON.stringify(e)),r.resetCart(),n()),a(!1)},2e3)},validationSchema:dt.object().shape({cart:dt.array().min(1,"Your Cart is Empty"),fullName:dt.string().min(3,"Full Name should be at least 3 characters").required("Full Name field can't be empty"),phone:dt.string().min(10,"Phone should be at least 10 characters").required("Phone field can't be empty"),email:dt.string().email("Wrong email format").required("Email field can't be empty"),address:dt.string().required("Address field can't be empty")})})(bt),ht=Object(m.connect)(null,{resetCart:function(){return{type:"RESET_CART"}}})(yt),vt=function(e){var t=e.cart;return u.a.createElement("div",{className:"container"},u.a.createElement("h1",{className:"mt-3"},"Cart"),u.a.createElement("hr",null),u.a.createElement(it,{cart:t}),u.a.createElement("hr",null),u.a.createElement(ht,{cart:t}))};vt.propTypes={cart:y.a.array.isRequired};var gt=[Oe,We,at,{path:"/cart",component:Object(m.connect)(function(e){return{cart:e.cart.items}})(vt),prepareData:function(e){return e.dispatch({type:"LOAD_CART"})}},{component:function(){return u.a.createElement("div",{className:"container"},u.a.createElement("h1",{className:"mt-3"},"404"),u.a.createElement("hr",null),u.a.createElement("p",null,"Can't find such page"))}}];function Et(){return(Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ot=function(e){e.history;var t=e.children,r=e.location,n=e.context;return u.a.createElement(s.StaticRouter,{location:r,context:n},t)},St=function(e){var t=e.history,r=e.store,n=e.location,o=e.context;return u.a.createElement(m.Provider,{store:r},u.a.createElement(Ot,{history:t,location:n,context:o},u.a.createElement(I,null),u.a.createElement(s.Switch,null,gt.map(function(e,t){return function(e,t){return u.a.createElement(s.Route,Et({key:t},e))}(e,t)})),u.a.createElement(s.Route,{path:p(),component:F})))},wt=r(15),_t=r.n(wt),jt=r(16),Ct=_t()(),Pt=r(17),xt=o()(),Tt=process.env.PORT||3001;xt.use(o.a.static(c.a.resolve(process.cwd(),"public"))),xt.set("view engine","esj"),xt.get("*",function(e,t){(function(e,t){return console.log("test1"),console.log("test2"),Object(jt.historyCallBack)(Ct,gt,{pathname:e.url,query:e.query}).then(function(){return{content:Object(l.renderToString)(u.a.createElement(St,{store:Ct,location:e.url,context:{}})),initialState:Ct.getState()}})})(e).then(function(e){t.status(200),t.render("index",{content:e.content,manifest:Pt,initialState:JSON.stringify(e.initialState)})})}),xt.listen(Tt,function(){return console.log("Server is running on ".concat(Tt," port."))})}]);